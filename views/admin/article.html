{%extends 'layout.html'%}


{%block main%}
	<div class="container">
		<button class="btn btn-default" id="article_create" data-toggle="modal" data-target="#myModal">添加文章</button>
	</div>	
	<br>
	<div class="container">
		 <table class="table table-bordered">
		 	<tr>
		 		<th>id</th>
		 		<th>title</th>
		 		<th>category</th>
		 		<th>author</th>
		 		<th>addTime</th>
		 		<th>views</th>
		 		<th>operation</th>
		 	</tr>
		 	{% for articleInfo in articlesInfo%}
	 		<tr>
	 			<td>{{articleInfo._id.toString()}}</td>
	 			<td>{{articleInfo.title}}</td>
	 			<td>{{articleInfo.category.name}}</td>
	 			<td>{{articleInfo.author.username}}</td>
				<td>{{articleInfo.addTime| date('y年m月d日 h:i:s',-8*60)}}</td>
				<td>{{articleInfo.views}}</td>
	 			<td><a href="#" class="article_modify_link" data-toggle="modal" data-target="#addArticle">修改</a>|<a href="/admin/article_delete?id={{articleInfo._id.toString()}}">删除</a></td>
	 		</tr>
		 	{%endfor%}
		 </table>
	</div>

 <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
	    <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	        <h4 class="modal-title" id="myModalLabel">添加文章</h4>
	    </div>    
	    <div class="modal-body">
	    	<div style="margin-right: -15px;margin-left: -15px;">
		      	<label class="col-sm-2" style="text-align:right;padding-top:7px;margin-bottom:0;">分类</label>
		      	<div class="col-sm-10" style="padding-bottom:15px">
					<select class="form-control" id="article_category">
					{% for name in categoryName %}
					  <option value="{{name._id.toString()}}">{{name.name}}</option>
					 {% endfor %} 
					</select>
				</div>
			</div>	
			<form class="form-horizontal">
				<div class="form-group">
				    <label for="article_title" class="col-sm-2 control-label">标题</label>
				    <div class="col-sm-10">
				    	<input type="email" class="form-control" id="article_title" placeholder="title">
				    </div>
			 	</div>
			 	<div class="form-group">
				    <label for="article_description" class="col-sm-2 control-label">简介</label>
				    <div class="col-sm-10">
				    	<input type="email" class="form-control" id="article_description" placeholder="description">
				    </div>
				</div>
				<div class="form-group">   
				    <label for="article_content" class="col-sm-2 control-label">内容</label>
				    <div class="col-sm-10">
				    	<textarea class="form-control" id="article_content" rows="5"></textarea>
				    </div>
				</div>	
			 </form>
			<div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		        <button type="button" class="btn btn-primary" id="article_save">Save changes</button>
		    </div>		
	    </div>
    </div>
  </div>
</div>

<div class="modal fade " id="addArticle" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel1">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
	    <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	        <h4 class="modal-title" id="myModalLabel1">修改文章</h4>
	    </div>
	    <div class="modal-body">
	    	<div style="margin-right: -15px;margin-left: -15px;">
		      	<label class="col-sm-2" style="text-align:right;padding-top:7px;margin-bottom:0;">分类</label>
		      	<div class="col-sm-10" style="padding-bottom:15px">
					<select class="form-control" id="article_selected_category">
					{% for name in categoryName %}
					  <option value="{{name._id.toString()}}">{{name.name}}</option>
					 {% endfor %} 
					</select>
				</div>
			</div>	
			<form class="form-horizontal">
				<div class="form-group">
				    <label for="article_selected_title" class="col-sm-2 control-label">标题</label>
				    <div class="col-sm-10">
				    	<input type="email" class="form-control" id="article_selected_title" placeholder="title">
				    </div>
		 		</div>
		 		<div class="form-group">
				    <label for="article_selected_description" class="col-sm-2 control-label">简介</label>
				    <div class="col-sm-10">
				    	<input type="email" class="form-control" id="article_selected_description" placeholder="description" value="">
				    </div>
				</div>
				<div class="form-group">   
				    <label for="article_selected_content" class="col-sm-2 control-label">内容</label>
				    <div class="col-sm-10">
				    	<textarea class="form-control" id="article_selected_content" rows="5" ></textarea>
				    </div>
				</div>	
			</form>
			<div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		        <button type="button" class="btn btn-primary" id="article_update">Save changes</button>
		    </div>
	    </div>
    </div>
  </div>
</div>	
{%endblock%}